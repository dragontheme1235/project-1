"use strict";
if("undefined"==typeof DGT){var DGT={};DGT.Widget=Class.create();DGT.Widget.prototype={DGT_MUTE_BTN_CLASS:"videoMuteBtn fa",DGT_MUTE_BTN_CLASS_ON:"fa-volume-up",DGT_MUTE_BTN_CLASS_OFF:"fa-volume-off",RIT_VIDEO_HW_RATIO:.5625,VENDOR_PREFIXES:["webkit","Moz"],initialize:function(a,b){this.id=a;this.container=$(a);this.config=b||{};this.checkCSS3Support();document.observe("dom:loaded",function(){this.initTab();this.initCountdown();this.config.carousel&&this.config.carousel.enable&&this.initCarousel(function(a){this.initCarouselAnimation(a,!0)}.bind(this))}.bind(this))},
    checkCSS3Support:function(){var a=new Element("div");a.style.cssText="-moz-transform:translate3d(0px, 0px, 0px);-ms-transform:translate3d(0px, 0px, 0px);-o-transform:translate3d(0px, 0px, 0px);-webkit-transform:translate3d(0px, 0px, 0px);transform:translate3d(0px, 0px, 0px)";a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);this.support3d=null!==a&&1<=a.length},initTab:function(){this.config.collectionUrl&&this.container.select(".widget-tabs a").each(function(a){var b=this.container.down(a.readAttribute("href"));
        b&&(b.down("ul")&&(b.has_content=!0),Event.observe(a,"click",function(d){Event.stop(d);this.activeTab(a,b);if(!b.has_content){var c=Event.findElement(d,"a");d=c.readAttribute("data-type");var e=c.readAttribute("data-value"),g=c.readAttribute("data-limit"),f=c.readAttribute("data-column"),h=c.readAttribute("data-row"),k=c.readAttribute("data-cid"),l=c.readAttribute("data-template"),c=c.readAttribute("data-carousel");new Ajax.Request(this.config.collectionUrl,{method:"post",parameters:{type:d,value:e,
            limit:g,form_key:DGT.FORM_KEY||null,carousel:c,column:f,cid:k,row:h,template:l},onSuccess:function(a){b.has_content=!0;b.innerHTML=a.responseText;$dgt(".dgt-tooltip").tooltip();this.initCarousel(function(a){this.initCarouselAnimation(a,!1);this.initCountdown();b.setStyle({height:"auto"})}.bind(this));this.config.collectionCallback&&this.config.collectionCallback()}.bind(this)})}}.bind(this)))}.bind(this))},initCountdown:function(){window.jQuery&&this.config.countdown&&this.config.countdown.enable&&
    (jQuery.fn.countdown?this.bindCountdownEvent():jQuery.getScript(this.config.countdown.engineSrc,function(){this.bindCountdownEvent()}.bind(this)))},initCarousel:function(a){window.jQuery&&this.container&&this.config.carousel&&this.config.carousel.enable&&(a&&(this.config.carousel.afterInit=a),jQuery.fn.owlCarousel?this.initCarouselElement(this.config.carousel):jQuery.getScript(this.config.carousel.engineSrc,function(){this.initCarouselElement(this.config.carousel)}.bind(this)))},bindCountdownEvent:function(){this.container.select(".product-date").each(function(a){var b=
        a.readAttribute("data-date");b&&(b={date:b,dayText:"",hourText:"",minText:"",secText:""},this.config.countdownTemplate&&(b.template=this.config.countdownTemplate),jQuery(a).countdown(b))}.bind(this))},initCarouselAnimation:function(a,b){if(this.config.animation&&this.config.animation.enable){var d=this.config.animation.animationName,c=[];a.find(".owl-item").each(function(a,b){var f=$(b);f.addClassName(d);f.hasClassName("active")&&(f.removeClassName("active"),f.setStyle({visibility:"hidden"}),c.push(f))}.bind(this));
        b?this.bindAnimateEvent(c):this.animateElements(c)}},bindAnimateEvent:function(a){["DOMContentLoaded","load","resize","scroll"].each(function(b){Event.observe(window,b,function(){!this.animated&&this.isElementInViewport(.5)&&(this.animated=!0,this.animateElements(a))}.bind(this))}.bind(this))},animateElements:function(a){var b=this.config.animation.animationDelay||300;a.each(function(a,c){this.setVendorCss(a,"animationDelay",(0==c?0:b*c)+"ms");a.addClassName("active");a.setStyle({visibility:"visible"})}.bind(this));
        setTimeout(function(){a.each(function(a){this.setVendorCss(a,"animationDelay","initial")}.bind(this))}.bind(this),(a.length+1)*b)},setVendorCss:function(a,b,d){var c={property:d};this.VENDOR_PREFIXES.each(function(a){c[a+b.charAt(0).toUpperCase()+b.substr(1)]=d});a.setStyle(c)},activeTab:function(a,b){if(a&&b){this.container.select(".widget-tabs .active").invoke("removeClassName","active");a.up().addClassName("active");if(b.has_content)this.container.select(".tab-pane.active").invoke("removeClassName",
        "active");else{var d=this.container.down(".tab-pane.active");if(d){b.setStyle({height:d.getDimensions().height+"px"});d.removeClassName("active");var c=new Element("div",{"class":"widget-spinner"});c.setStyle({width:"100%",height:"100%"});this.config.spinnerClass&&c.addClassName(this.config.spinnerClass);if(this.config.spinnerImg){c.setStyle({position:"relative"});var e=new Element("img",{src:this.config.spinnerImg});Event.observe(e,"load",function(){e.setStyle({position:"absolute",top:"50%",left:"50%",
        marginLeft:-1*e.width/2+"px",marginTop:-1*e.height/2+"px"});c.insert(e)})}b.insert(c)}}b.addClassName("active")}},initCarouselElement:function(a){this.config.carouselConfig&&(a=Object.extend(a,this.config.carouselConfig));this.container.select(".owl-carousel").each(function(b){jQuery(b).owlCarousel(a)})},initOverlay:function(){"none"==this.config.parallax.overlay&&this.container.insert({top:(new Element("div",{"class":"widget-overlay"})).setStyle({position:"absolute",left:0,top:0,width:"100%",height:"100%",
        backgroundColor:"rgba(0, 0, 0, 0.6)"})});"none"!=this.config.parallax.overlay&&this.container.insert({top:(new Element("div",{"class":"widget-overlay"})).setStyle({position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",backgroundImage:"url("+dgtThemes.url+this.config.parallax.overlay+")",backgroundRepeat:"repeat"})})},isElementInViewport:function(a){a=a||1;var b=this.container.getBoundingClientRect(),d=window.innerHeight||document.documentElement.clientHeight;
        return 0<b.top?b.top<d-b.height*a:b.bottom>b.height*a},isElementPartialInViewport:function(){var a=this.container.getBoundingClientRect();return 0<a.bottom&&a.bottom<=a.height||0<a.top&&a.top<=(window.innerHeight||document.documentElement.clientHeight)},postmessage:function(a,b,d){b={method:b};null!=d&&(b.value=d);a.contentWindow.postMessage(JSON.stringify(b),a.src.split("?")[0])}}};