/**
 *
 * ------------------------------------------------------------------------------
 * @category     Mono
 * @package DGT Framework
 * ------------------------------------------------------------------------------
 * @copyright    Copyright (C) 2014-2015 dragontheme.com. All Rights Reserved.
 * @license      GNU General Public License version 2 or later;
 * @author       dragontheme.com
 * @email        support@dragontheme.com
 * ------------------------------------------------------------------------------
 *
 */
function themeResize(){width=$dgt(window).width();if(width<=752){$dgt("body").find(".btn-cart").addClass("btn-cart-mobile");if($dgt(".product-quick-view").length>0){$dgt("body").find(".btn-cart").removeClass("btn-cart-mobile")}}else{$dgt("body").find(".btn-cart").removeClass("btn-cart-mobile")}}function setAjaxData(e,t){if(e.status=="ERROR"){showCartBox(e.message)}else{$dgt(".dgt-maincart").html("");if($dgt(".dgt-maincart")){$dgt(".dgt-maincart").append(e.output)}if($dgt(".header .links")){$dgt(".header .links").replaceWith(e.toplink)}$dgt.colorbox.close();showCartBox(e.message,false)}}function showCartBox(e,t){$dgt("#ajax-status").html('<div class="success" style="display: none;">'+'<i class="fa fa-check"></i>'+""+e+""+'<button class="close"><i class="fa fa-times-circle"></i></button></div>');if(t){$dgt(".success").addClass("ajax-loading");$dgt(".success .fa-check").hide();$dgt(".success .close").hide()}else{$dgt(".success").removeClass("ajax-loading");$dgt(".success .fa-check").show();$dgt(".success .close").show()}$dgt(".success").fadeIn("slow");if(!t){setTimeout(function(){$dgt(".success").delay(500).fadeOut(1e3)},7e3)}}function setLocation(e){var t=e.indexOf("checkout/cart")>-1;var n=true;if($dgt("body").find(".btn-cart-mobile").length>0){n=false}if(t&&n){data="&isAjax=1&qty=1";e=e.replace("checkout/cart","ajaxcart/index");showCartBox(datatext.load,true);try{$dgt.ajax({url:e,dataType:"json",data:data,type:"post",success:function(e){setAjaxData(e)}})}catch(r){}return false}return window.location.href=e}function deletecart(e){var t=e.indexOf("checkout/cart")>-1;if(t){if(confirm("Are you sure you would like to remove this item from the shopping cart?")){data="&isAjax=1&qty=1";var e=e.replace("checkout/cart","ajaxcart/index");showCartBox(datatext.load,true);$dgt.ajax({url:e,dataType:"json",data:data,type:"post",success:function(e){setAjaxData(e,false)}})}}return false}$dgt(function(e){themeResize();e(window).resize(function(){themeResize()});e(".dgt-maincart a").live("click",function(){var t=e(this).attr("href").indexOf("checkout/cart/delete")>-1;if(t&&e(this).attr("class")!="deletecart"&&e(this).attr("class").indexOf("btn-remove2")==-1){deletecart(e(this).attr("href"));return false}});e(".success button.close").live("click",function(){e(this).parent().fadeOut("slow",function(){e(this).remove()})});e(".options-cart").live("click",function(){e.colorbox({iframe:true,href:this.href,opacity:.5,speed:300,current:"{current} / {total}",close:"close",innerWidth:"780px",innerHeight:"650px",onOpen:function(){e("#cboxLoadingGraphic").addClass("box-loading")},onComplete:function(){setTimeout(function(){e("#cboxLoadingGraphic").removeClass("box-loading")},1300)}})});e(".show-options").live("click",function(t){if(e(".btn-cart-mobile").length==0){e("[data-id=options-cart-"+e(this).attr("data-id")+"]").trigger("click")}else{return window.location.href=e(this).attr("data-submit")}});if(e(".product-view").length>0&&e(".option-file").length==0&&e(".btn-cart-mobile").length==0){productAddToCartForm.submit=function(t,n){if(this.validator.validate()){var r=this.form;var i=r.action;if(n){r.action=n}var s=null;if(!n){n=e("#product_addtocart_form").attr("action")}var o=n.indexOf("wishlist/index/cart")>-1;n=n.replace("checkout/cart","ajaxcart/index");var u=e("#product_addtocart_form").serialize();u+="&isAjax=1";try{if(o){this.form.submit()}else{if(e("#qty").val()==0){if(e(".error_qty").length==0){e("<span/>").html("The quantity not zero!").addClass("error_qty").appendTo(e(".add-to-cart"))}}else{e(".error_qty").remove();e("span.textrepuired").html("");if(!e(".ajaxcart-index-options").length>0){showCartBox(datatext.load,true)}e.ajax({url:n,dataType:"json",type:"post",data:u,success:function(n){parent.setAjaxData(n,true);e.colorbox.close();if(t&&t!="undefined"){t.disabled=false}}})}}}catch(s){}this.form.action=i;if(s){throw s}}return false}.bind(productAddToCartForm)}})